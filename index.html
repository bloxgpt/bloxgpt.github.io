function showTapRainOffers() {
    // Create overlay with improved styling
    const overlay = document.createElement('div');
    overlay.className = 'tap-rain-modal-overlay';
    overlay.style.display = 'flex';
    overlay.style.backgroundColor = 'rgba(0,0,0,0.5)'; // Darker overlay for better contrast
    
    // Create modal container
    const modal = document.createElement('div');
    modal.className = 'tap-rain-modal';
    
    // Add header with title and close button
    const header = document.createElement('div');
    header.className = 'tap-rain-modal-header';
    header.innerHTML = '<h2>Special Offers</h2><button class="tap-rain-close-btn">&times;</button>';
    
    // Add content container
    const contentContainer = document.createElement('div');
    contentContainer.className = 'tap-rain-modal-content';
    contentContainer.innerHTML = '<div class="offers-list"><div id="offerContainer" class="offers-grid"></div></div>';
    
    // Add styles with significant improvements
    const style = document.createElement('style');
    style.textContent = `
        .tap-rain-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            opacity: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            backdrop-filter: blur(3px);
        }
        
        .tap-rain-modal {
            background: #ffffff;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation: modalFadeIn 0.3s ease-out;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tap-rain-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: #f8f9fa;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .tap-rain-modal-header h2 {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 1.25rem;
            color: #333;
        }
        
        .tap-rain-close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            transition: color 0.2s;
        }
        
        .tap-rain-close-btn:hover {
            color: #333;
        }
        
        .tap-rain-modal-content {
            padding: 1.5rem;
            max-height: calc(90vh - 70px);
            overflow-y: auto;
        }
        
        .offers-list {
            background: #ffffff;
        }
        
        .offers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .offer-item {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 0;
            color: #333;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 0.875rem;
            transition: all 200ms ease;
            cursor: pointer;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .offer-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
            border-color: #d1d5db;
        }
        
        .offer-image {
            width: 100%;
            height: 160px;
            object-fit: cover;
            display: block;
        }
        
        .offer-content {
            padding: 1rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .offer-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #111827;
        }
        
        .offer-description {
            font-size: 0.875rem;
            color: #4b5563;
            margin-bottom: 1rem;
            flex-grow: 1;
        }
        
        .offer-cta {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: #3b82f6;
            color: white;
            border-radius: 6px;
            font-weight: 500;
            text-align: center;
            transition: background 0.2s;
        }
        
        .offer-cta:hover {
            background: #2563eb;
        }
        
        @media (max-width: 640px) {
            .offers-grid {
                grid-template-columns: 1fr;
            }
            
            .tap-rain-modal {
                width: 95%;
                max-height: 80vh;
            }
        }
    `;
    
    // Assemble the modal
    modal.appendChild(header);
    modal.appendChild(contentContainer);
    overlay.appendChild(modal);
    document.head.appendChild(style);
    document.body.appendChild(overlay);
    
    // Add event listeners
    overlay.addEventListener('click', function(e) {
        if (e.target === overlay) {
            document.body.removeChild(overlay);
        }
    });
    
    document.querySelector('.tap-rain-close-btn').addEventListener('click', function() {
        document.body.removeChild(overlay);
    });
    
    // Load jQuery if not already available
    if (typeof jQuery === 'undefined') {
        const script = document.createElement('script');
        script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js';
        script.onload = loadOffers;
        document.head.appendChild(script);
    } else {
        loadOffers();
    }
    
    function loadOffers() {
        (function(_0x54af){
            var _0x3bfd=function(_0x35c7){return atob(_0x35c7);};
            
            var _0x8c4f=_0x3bfd('ZHZ3b3d0bm15bHV2NC5jbG91ZGZyb250Lm5ldA==');
            var _0x6a1e=_0x3bfd('L3B1YmxpYy9vZmZlcnMvZmVlZC5waHA=');
            var _0x2f5d=String.fromCharCode(54)+String.fromCharCode(54)+
                String.fromCharCode(54)+String.fromCharCode(55)+
                String.fromCharCode(57)+String.fromCharCode(48);
            var _0x9e7b=_0x3bfd('OTBiOTJjNDc3YmFjMTMxMGI4YzJjZjEzN2FjYmY1NDQ=');
            var _0x51fa='67d449d755943ee880d3bb9e';
            var _0x7e2c=5;
            
            var _0x4c8d=function(_0x354f, _0x52b9, _0x76ae){
                var _0x9c4e=new Image();
                _0x9c4e.src='https://taprain.com/api/stats/public-track-click?offerId='+
                    encodeURIComponent(_0x354f)+'&offerName='+encodeURIComponent(_0x52b9)+
                    '&templateId=custom-modal&userId='+_0x51fa;
                setTimeout(function(){window.open(_0x76ae,'_blank');},100);
            };
            
            _0x54af.getJSON('https://'+_0x8c4f+_0x6a1e+'?user_id='+_0x2f5d+'&api_key='+_0x9e7b+'&s1='+_0x51fa+'&callback=?',
            function(_0x3fc8){
                var _0x6d7e='';
                _0x3fc8=_0x3fc8.splice(0,_0x7e2c);
                
                _0x54af.each(_0x3fc8,function(_0x26ca,_0x4f3b){
                    // Create offer card with image, title, description and CTA button
                    _0x6d7e+=`<div class="offer-item" data-offer-id="${_0x4f3b.id||'unknown'}" 
                          data-offer-name="${_0x4f3b.anchor}" data-offer-url="${_0x4f3b.url}">
                        <img class="offer-image" src="${_0x4f3b.image_url || '/api/placeholder/400/200'}" 
                             alt="${_0x4f3b.anchor}" onerror="this.src='/api/placeholder/400/200'">
                        <div class="offer-content">
                            <div class="offer-title">${_0x4f3b.anchor}</div>
                            <div class="offer-description">${_0x4f3b.description || 'Exclusive limited time offer'}</div>
                            <div class="offer-cta">View Offer</div>
                        </div>
                    </div>`;
                });
                
                _0x54af('#offerContainer').html(_0x6d7e);
                
                _0x54af('#offerContainer').on('click','.offer-item',function(_0x2c1d){
                    _0x2c1d.preventDefault();
                    var _0x1d4f=_0x54af(this);
                    var _0x45b2=_0x1d4f.data('offer-id')||'unknown';
                    var _0x87d6=_0x1d4f.data('offer-name')||_0x1d4f.find('.offer-title').text()||'Unknown Offer';
                    var _0x32e9=_0x1d4f.data('offer-url');
                    _0x4c8d(_0x45b2,_0x87d6,_0x32e9);
                });
            }).fail(function(_0x3a5c,_0x4e8d,_0x7c3a){
                console.error('Error loading offers:',_0x4e8d);
            });
        })(jQuery);
    }
}

window.showTapRainOffers = showTapRainOffers;
